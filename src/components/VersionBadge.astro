---
/**
 * Version badge component
 * Displays version number (v3, v4, etc.) with optional "Latest" indicator
 */

interface Props {
  version: string;
  isLatest?: boolean;
  size?: 'sm' | 'md' | 'lg';
}

const { version, isLatest = false, size = 'md' } = Astro.props;

// Size classes
const sizeClasses = {
  sm: 'text-xs px-2 py-0.5',
  md: 'text-sm px-2.5 py-1',
  lg: 'text-base px-3 py-1.5'
};

// Color scheme based on version (v4 = blue, v3 = gray, etc.)
const versionLower = version.toLowerCase();
const isMergedVersion = versionLower.startsWith('merged');
const numericVersion = parseInt(version.replace(/[^0-9]/g, ''), 10);
const hasNumericVersion = !Number.isNaN(numericVersion);

const colorClass = isMergedVersion
  ? 'bg-emerald-100 text-emerald-800 ring-emerald-600/20'
  : (isLatest || (hasNumericVersion && numericVersion >= 4)
      ? 'bg-blue-100 text-blue-800 ring-blue-600/20'
      : 'bg-gray-100 text-gray-700 ring-gray-600/20');
---

<span class:list={[
  'inline-flex items-center gap-1.5 rounded-md font-medium ring-1 ring-inset',
  sizeClasses[size],
  colorClass
]}>
  <span>{version}</span>
  {isLatest && (
    <span class="inline-flex items-center rounded-full bg-blue-600 px-1.5 py-0.5 text-xs font-semibold text-white">
      Latest
    </span>
  )}
</span>
